"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("itowns_widgets",[],e):"object"==typeof exports?exports.itowns_widgets=e():t.itowns_widgets=e()}(self,(function(){return(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[318],{69567:(t,e,o)=>{o.r(e),o.d(e,{Minimap:()=>E,Navigation:()=>p,Scale:()=>D});var n=o(15671),i=o(43144),a=o(79340),r=o(82963),s=o(61120),c=o(41933),l=(0,i.Z)((function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;(0,n.Z)(this,t),this.parentElement=o.parentElement||e.domElement,this.position=o.position||i.position,["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right"].includes(this.position)||(console.warn("'position' optional parameter for 'Widget' constructor is not a valid option. "+"It will be set to '".concat(i.position,"'.")),this.position=i.position),this.domElement=document.createElement("div"),this.parentElement.appendChild(this.domElement),this.domElement.style.width="".concat(o.width||o.size||i.width,"px"),this.domElement.style.height="".concat(o.height||o.size||i.height,"px");var a=this.position.split("-");if(this.domElement.classList.add("".concat(a[0],"-widget")),a[1])this.domElement.classList.add("".concat(a[1],"-widget"));else switch(a[0]){case"top":case"bottom":this.domElement.style.left="calc(50% - ".concat(this.domElement.offsetWidth/2,"px)");break;case"left":case"right":this.domElement.style.top="calc(50% - ".concat(this.domElement.offsetHeight/2,"px)")}o.translate&&(this.domElement.style.transform="translate(".concat(o.translate.x||0,"px, ").concat(o.translate.y||0,"px)"))}));const d=l;var m={parentElement:document.body,displayCompass:!0,display3DToggle:!0,displayZoomIn:!0,displayZoomOut:!0,animationDuration:500,position:"bottom-left",direction:"column"},u=function(t){(0,a.Z)(d,t);var e,o,l=(e=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(o){var i=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function d(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(this,d),["top","bottom","left","right"].includes(o.position)&&(console.warn("'position' optional parameter for 'Navigation' is not a valid option. "+"It will be set to '".concat(m.position,"'.")),o.position=m.position),(e=l.call(this,t,o,m)).direction=o.direction||m.direction,["column","row"].includes(e.direction)||(console.warn("'direction' optional parameter for 'Navigation' constructor is not a valid option. "+"It will be set to '".concat(m.direction,"'.")),e.direction=m.direction),e.animationDuration=void 0===o.animationDuration?m.animationDuration:o.animationDuration,e.domElement.id="widgets-navigation",e.domElement.classList.add("".concat(e.direction,"-widget")),(void 0===o.displayCompass?m.displayCompass:o.displayCompass)&&(e.compass=e.addButton("compass","",(function(){t.controls.lookAtCoordinate({heading:0,tilt:89.5,time:e.animationDuration})}),"widgets"),t.addEventListener(c.b.CAMERA_MOVED,(function(t){e.compass.style.transform="rotate(".concat(-t.heading,"deg)")}))),(void 0===o.display3DToggle?m.display3DToggle:o.display3DToggle)&&(e.switch3dButton=e.addButton("3d-button","3D",(function(){var o;o=t.controls.getTilt()<89?89.5:40,t.controls.lookAtCoordinate({tilt:o,time:e.animationDuration})})),t.addEventListener(c.b.CAMERA_MOVED,(function(t){e.switch3dButton.innerHTML=t.tilt<89?"2D":"3D"}))),(void 0===o.displayZoomIn?m.displayZoomIn:o.displayZoomIn)&&(e.zoomInButton=e.addButton("zoom-in-button",'<span class="widget-zoom-button-logo"></span>',(function(){t.controls.lookAtCoordinate({zoom:Math.min(20,t.controls.getZoom()+1),time:e.animationDuration})}),"zoom-button-bar")),(void 0===o.displayZoomOut?m.displayZoomOut:o.displayZoomOut)&&(e.zoomOutButton=e.addButton("zoom-out-button",'<span id="zoom-out-logo" class="widget-zoom-button-logo"></span>',(function(){t.controls.lookAtCoordinate({zoom:Math.max(3,t.controls.getZoom()-1),time:e.animationDuration})}),"zoom-button-bar")),e}return(0,i.Z)(d,[{key:"addButton",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n=arguments.length>3?arguments[3]:void 0,i=document.getElementById(n);i||(i=this.addButtonBar(n));var a=document.createElement("button");return a.className="widget-button",a.id=t,a.innerHTML=e,i.appendChild(a),a.addEventListener("click",o),a}},{key:"addButtonBar",value:function(t){var e=document.createElement("div");return e.className="widget-button-bar",t&&(e.id=t),this.domElement.appendChild(e),e}}]),d}(d);const p=u;var f=o(60145),h=o(49469),v=o(48682),w=o(800);var g={minScale:2e-6,maxScale:2e-9,zoomRatio:1/30,width:150,height:150,position:"bottom-left"},y=function(t){(0,a.Z)(l,t);var e,o,c=(e=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(o){var i=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function l(t,e){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((0,n.Z)(this,l),!t.isGlobeView)throw new Error("'Minimap' plugin only supports 'GlobeView'. Therefore, the 'view' parameter must be a 'GlobeView'.");if(!e.isColorLayer)throw new Error("'layer' parameter form 'Minimap' constructor should be a 'ColorLayer'.");if((o=c.call(this,t,i,g)).minScale=i.minScale||g.minScale,o.maxScale=i.maxScale||g.maxScale,o.zoomRatio=i.zoomRatio||g.zoomRatio,o.domElement.id="widgets-minimap",i.cursor){var a=document.createElement("div");a.id="cursor-wrapper",o.domElement.appendChild(a),"string"==typeof i.cursor?a.innerHTML=i.cursor:i.cursor instanceof HTMLElement&&a.appendChild(i.cursor)}o.view=new v.Z(o.domElement,e.source.extent,{camera:{type:w.P.ORTHOGRAPHIC},placement:e.source.extent,noControls:!0,maxSubdivisionLevel:t.tileLayer.maxSubdivisionLevel}),o.view.addLayer(e),t.domElement.focus(),o.domElement.addEventListener("pointerdown",(function(t){t.stopPropagation(),t.preventDefault()}));var r=o.view.camera.camera3D,s=o.view.getScale(i.pitch),d=r.zoom*o.maxScale/s,m=r.zoom*o.minScale/s,u=new f.Z(t.referenceCrs),p=new f.Z(o.view.referenceCrs),y=t.controls.getCameraTargetPosition();return t.addFrameRequester(h.Ao.AFTER_RENDER,(function(){var e=t.camera.camera3D.position.distanceTo(y),n=t.getScaleFromDistance(i.pitch,e);r.zoom=o.zoomRatio*m*n/o.minScale,r.zoom=Math.min(Math.max(r.zoom,d),m),r.updateProjectionMatrix(),u.setFromVector3(t.controls.getCameraTargetPosition()),u.as(o.view.referenceCrs,p),r.position.x=p.x,r.position.y=p.y,r.updateMatrixWorld(!0),o.view.notifyChange(r)})),o}return(0,i.Z)(l)}(d);const E=y;var b=o(11925),Z=o(91742),x=o(44450);var R={width:200,height:30,position:"bottom-left"},C=function(t){(0,a.Z)(d,t);var e,o,l=(e=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(o){var i=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(0,r.Z)(this,t)});function d(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(this,d),(e=l.call(this,t,o,R)).domElement.id="widgets-scale",e.view=t,e.domElement.innerHTML="Scale",e.width=o.width||R.width,e.view.isGlobeView?(e.view.addEventListener(Z.b.GLOBE_INITIALIZED,(function(){e.update()})),e.view.controls.addEventListener(b.Q.RANGE_CHANGED,(function(){e.update()}))):e.view.isPlanarView?(e.view.addEventListener(c.b.INITIALIZED,(function(){e.update()})),e.view.addEventListener(x.uZ.MOVED,(function(){e.update()}))):console.warn("The 'view' linked to scale widget is neither a 'GlobeView' nor a 'PlanarView'. The scale wont automatically update. You can implement its update automation using 'Scale.update' method."),e}return(0,i.Z)(d,[{key:"addEventListeners",value:function(){}},{key:"update",value:function(){var t=Math.round(this.view.getPixelsToMeters(this.width)),e=Math.pow(10,t.toString().length-1);t=Math.round(t/e)*e;var o=this.view.getMetersToPixels(t),n="m";t>=1e3&&(t/=1e3,n="km"),this.domElement.innerHTML="".concat(t," ").concat(n),this.domElement.style.width="".concat(o,"px")}}]),d}(d);const D=C}},t=>(69567,t(t.s=69567))])}));
//# sourceMappingURL=itowns_widgets.js.map