<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Cache - iTowns documentation</title>

    <script src="../../scripts/prettify/prettify.js"> </script>
    <script src="../../scripts/prettify/lang-css.js"> </script>
    <link type="text/css" rel="stylesheet" href="../../styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="../../styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="../../styles/itowns.css">
</head>

<body>



<section>

<article>

    <h1>
        Cache
        
    </h1>

    
        <div class="description"><p>This is a copy of the Map object, except that it also store a value for last
time used. This value is used for cache expiration mechanism.
<br><br>
This module can be imported anywhere, its data will be shared, as it is a
single instance.</p></div>
    

    

    
        <hr class="title-divider"/>
        <h2>Example</h2>
        


    

    <pre class="prettyprint source lang-js"><code>import Cache from './Cache';

Cache.set({ bar: 1 }, Cache.POLICIES.TEXTURE, 'foo');
Cache.set({ bar: 32 }, Cache.POLICIES.INFINITE, 'foo', 'toto');

Cache.get('foo');

Cache.delete('foo');

Cache.clear();

Cache.flush();</code></pre>


    

    

    

    
        <hr class="title-divider"/>
        <h2>Static Methods</h2>
        
            

<div class="method">
    <h3>
        <span class="method-name">clear</span>
        (


)
        
    </h3>

    
        
            <div class="description">
                <p>Removes all entries of the cache.</p>
            </div>
        
    

    

    

    
        
    
</div>

            <hr/>
        
            

<div class="method">
    <h3>
        <span class="method-name">delete</span>
        (


    
    
        key1:
            <span class="type">string</span>, 
    
        key2:
            <span class="type">string</span>, 
    
        key3:
            <span class="type">string</span>
    

)
        
    </h3>

    
        
            <div class="description">
                <p>Deletes the specified entry from the cache.</p>
            </div>
        
    

    

    
        <h4>Parameters</h4>
        

<ul class="params">
    
    <li>
        <code>key1</code>
        
        

        
    </li>
    
    <li>
        <code>key2</code>
        (optional)
        

        
    </li>
    
    <li>
        <code>key3</code>
        (optional)
        

        
    </li>
    
</ul>

    

    
        
    
</div>

            <hr/>
        
            

<div class="method">
    <h3>
        <span class="method-name">flush</span>
        (


    
    
        time:
            <span class="type">number</span>
    

)
        
    </h3>

    
        
            <div class="description">
                <p>Flush the cache: entries that have been present for too long since the
last time they were used, are removed from the cache. By default, the
time is the current time, but the interval can be reduced by doing
something like <code>Cache.flush(Date.now() - reductionTime)</code>. If you want to
clear the whole cache, use Cache.clear instead.</p>
            </div>
        
    

    

    
        <h4>Parameters</h4>
        

<ul class="params">
    
    <li>
        <code>time</code>
        (default: <code>Date.now()</code>)
        
        

        
    </li>
    
</ul>

    

    
        
    
</div>

            <hr/>
        
            

<div class="method">
    <h3>
        <span class="method-name">get</span>
        (


    
    
        key1:
            <span class="type">string</span>, 
    
        key2:
            <span class="type">string</span>, 
    
        key3:
            <span class="type">string</span>
    

)
        :
            
                <span class="type">Object</span>

            
        
    </h3>

    
        
            <div class="description">
                <p>Returns the entry related to the specified key from the cache. The last
time used property of the entry is updated to extend the longevity of the
entry.</p>
            </div>
        
    

    

    
        <h4>Parameters</h4>
        

<ul class="params">
    
    <li>
        <code>key1</code>
        
        

        
    </li>
    
    <li>
        <code>key2</code>
        (optional)
        

        
    </li>
    
    <li>
        <code>key3</code>
        (optional)
        

        
    </li>
    
</ul>

    

    
        
    
</div>

            <hr/>
        
            

<div class="method">
    <h3>
        <span class="method-name">set</span>
        (


    
    
        value:
            <span class="type">Object</span>, 
    
        lifetime:
            <span class="type">number</span>, 
    
        key1:
            <span class="type">string</span>, 
    
        key2:
            <span class="type">string</span>, 
    
        key3:
            <span class="type">string</span>
    

)
        :
            
                <span class="type">Object</span>

            
        
    </h3>

    
        
            <div class="description">
                <p>Adds or updates an entry with specified keys (up to 3). A lifetime can be
added, by specifying a numerical value or using the Cache.POLICIES values. By default an entry has an infinite lifetime.
Caution: it overrides any existing entry already set at this/those key/s.</p>
            </div>
        
    

    
                <h4>Returns</h4>
                
                    <p>the added value</p>
                

    
        <h4>Parameters</h4>
        

<ul class="params">
    
    <li>
        <code>value</code>
        
        

        
    </li>
    
    <li>
        <code>lifetime</code>
        
        

        
    </li>
    
    <li>
        <code>key1</code>
        
        

        
    </li>
    
    <li>
        <code>key2</code>
        (optional)
        

        
    </li>
    
    <li>
        <code>key3</code>
        (optional)
        

        
    </li>
    
</ul>

    

    
        
    
</div>

            
        
    

    
        <hr class="title-divider"/>
        <h2>Types</h2>
        
            

<div class="typedef">
    <h3>
        <span class="typedef-name">POLICIES</span>
        : <span class="type">Object</span>
    </h3>

    
    

<ul class="params">
    
    <li>
        <code>INFINITE: <span class="type">number</span></code>
        
        
            &mdash; <span><p>The entry is never flushed, except when the
<code>all</code> flag is set to <code>true</code> when calling Cache.flush.</p></span>
        

        
    </li>
    
    <li>
        <code>TEXTURE: <span class="type">number</span></code>
        
        
            &mdash; <span><p>Shortcut for texture resources. Time is 15 minutes.</p></span>
        

        
    </li>
    
    <li>
        <code>ELEVATION: <span class="type">number</span></code>
        
        
            &mdash; <span><p>Shortcut for elevation resources. Time is 15
minutes.</p></span>
        

        
    </li>
    
</ul>


    
        <div class="description">
            <p>Cache policies for flushing. Those policies can be used when something is
set into the Cache, as the lifetime property.</p>
        </div>
    
</div>

            
        
    

    



        <hr class="title-divider"/>
        <h2>Source</h2>
        <a target="_blank" href="https://github.com/itowns/itowns/blob/master/src/Core/Scheduler/Cache.js">
            src/Core/Scheduler/Cache.js
        </a>




</article>

</section>

<script> prettyPrint(); </script>
<script src="../../scripts/linenumber.js"> </script>
</body>
</html>